
### random

#### VRF

可验证随机函数（Verifiable Random Function, VRF）是一种加密原语，具有以下几个关键特性：

1.公钥和私钥：VRF 使用一对密钥，公钥（PK）用于验证，私钥（SK）用于生成随机值。只有持有私钥的用户可以计算出特定输入的随机值。
2.确定性输出：对于相同的输入，VRF 总是生成相同的输出。这意味着给定相同的输入，任何人都可以使用公钥验证生成的输出是否正确。
3.可验证性：任何人都可以使用公钥验证 VRF 输出的正确性。验证者可以检查生成的随机值是否是由持有私钥的用户计算得出的，而无需知道私钥本身。
4.安全性：VRF 的安全性通常基于某些数学难题（如离散对数问题或椭圆曲线问题），确保即使攻击者知道公钥和输出，也无法伪造有效的输出。

#### chainlink VRF

chainlink的VRF参考这篇[论文](https://eprint.iacr.org/2017/099.pdf)
这篇论文主要讨论了 NSEC5 的设计和实现，NSEC5 是对 DNSSEC 的一种修改，旨在增强 DNS 的安全性。论文的核心内容包括：
1.安全属性：NSEC5 旨在提供两项关键的安全属性：一是防止离线区域枚举攻击的隐私保护，二是在权威名称服务器被攻击者攻破的情况下，仍能保持区域内容的完整性。
2.可验证随机函数 (VRF)：论文介绍了一种基于椭圆曲线密码学的新型可验证随机函数，这种 VRF 不仅提高了 NSEC5 的性能，还在其他项目中具有独立的应用价值。
3.性能优化：作者通过预计算和 DNS 协议级别的优化，展示了如何提高 NSEC5 的响应速度，并减少响应的长度，以适应高吞吐量的 DNS 查询场景。
4.实现与评估：论文中还展示了 NSEC5 的首次全面实现，包括权威名称服务器和递归解析器的实现，并对其在高负载下的性能进行了评估，证明了其在实际应用中的可行性


在可验证随机函数（VRF）的上下文中，公式推导通常涉及对 VRF 输出的生成和验证过程的数学描述。以下是一些关键公式的推导过程，基于您提供的文档内容。

#### VRF公式推导

##### 1. VRF 输出的生成

给定输入 $ \alpha $ 和私钥 $ SK $，VRF 生成输出 $ \beta $ 和证明 $ \pi $ 的过程可以表示为：

$
\beta = F_{SK}(\alpha)
$

其中 $ F $ 是 VRF 的函数，$ SK $ 是私钥，$ \alpha $ 是输入。

##### 2. 验证过程

验证者使用公钥 $ PK $ 和证明 $ \pi $ 来验证输出 $ \beta $ 的正确性。验证过程可以表示为：

$
\text{Ver}(PK, \alpha, \pi) \rightarrow \text{VALID} \text{ 或 } \text{INVALID}
$

##### 3. 唯一性证明

在文档中提到的唯一性证明可以通过对比两个不同的 VRF 输出 $ \beta_1 $ 和 $ \beta_2 $ 来进行。假设存在一个对手能够找到两个不同的输出和对应的证明：

$
\beta_1 = \text{Proof2Hash}(\pi_1) \quad \text{且} \quad \text{Ver}(PK, \alpha, \pi_1) = \text{VALID}
$
$
\beta_2 = \text{Proof2Hash}(\pi_2) \quad \text{且} \quad \text{Ver}(PK, \alpha, \pi_2) = \text{VALID}
$

根据唯一性，必须有：

$
\beta_1 \neq \beta_2
$

##### 4. 对数关系

在文档中提到的对数关系推导如下：

假设有两个方程：

$
u = (g^x)^{c_1} g^{s_1}
$
$
v = (\gamma_1)^{c_1} h^{s_1}
$

对这两个方程取对数，得到：

$
\log_g u - \log_h v \equiv c_1 \cdot x - \log_h \gamma_1 \quad (\text{mod } q)
$

这表明对于给定的 $ g, h, g^x, \gamma_1, u, v $，存在唯一的 $ c_1 $ 满足上述关系。

##### 5. 伪随机性

伪随机性保证了输出 $ \beta $ 对于不知道私钥 $ SK $ 的任何对手来说是不可区分于随机的。形式化的定义为：

对于任何选择的输入 $ \alpha $，输出 $ \beta $ 在没有私钥的情况下是随机的。

